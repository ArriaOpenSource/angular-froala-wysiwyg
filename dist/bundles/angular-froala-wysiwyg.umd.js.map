{"version":3,"file":"angular-froala-wysiwyg.umd.js","sources":["../../src/editor/editor.directive.ts","../../src/editor/editor.module.ts","../../src/view/view.directive.ts","../../src/view/view.module.ts","../../src/index.ts","../../src/angular-froala-wysiwyg.ts"],"sourcesContent":["import { ControlValueAccessor, NG_VALUE_ACCESSOR } from \"@angular/forms\";\r\nimport { Directive, ElementRef, EventEmitter, Input, NgZone, Optional, Output, forwardRef } from '@angular/core';\r\n\r\ndeclare var $: JQueryStatic;\r\n\r\n\r\n@Directive({\r\n  selector: '[froalaEditor]',\r\n  exportAs: 'froalaEditor',\r\n  providers: [{\r\n    provide: NG_VALUE_ACCESSOR, useExisting:\r\n      forwardRef(() => FroalaEditorDirective),\r\n    multi: true\r\n  }]\r\n})\r\nexport class FroalaEditorDirective implements ControlValueAccessor {\r\n\r\n  // editor options\r\n  private _opts: any = {\r\n    immediateAngularModelUpdate: false,\r\n    angularIgnoreAttrs: null\r\n  };\r\n\r\n  // jquery wrapped element\r\n  private _$element: any;\r\n\r\n  private SPECIAL_TAGS: string[] = ['img', 'button', 'input', 'a'];\r\n  private INNER_HTML_ATTR: string = 'innerHTML';\r\n  private _hasSpecialTag: boolean = false;\r\n\r\n  // editor element\r\n  private _editor: any;\r\n\r\n  // initial editor content\r\n  private _model: string;\r\n\r\n  private _listeningEvents: string[] = [];\r\n\r\n  private _editorInitialized: boolean = false;\r\n\r\n  private _oldModel: string = null;\r\n\r\n  constructor(el: ElementRef, private zone: NgZone) {\r\n\r\n    let element: any = el.nativeElement;\r\n\r\n    // check if the element is a special tag\r\n    if (this.SPECIAL_TAGS.indexOf(element.tagName.toLowerCase()) != -1) {\r\n      this._hasSpecialTag = true;\r\n    }\r\n\r\n    // jquery wrap and store element\r\n    this._$element = (<any>$(element));\r\n\r\n    this.zone = zone;\r\n  }\r\n\r\n  // Begin ControlValueAccesor methods.\r\n  onChange = (_) => { };\r\n  onTouched = () => { };\r\n\r\n  // Form model content changed.\r\n  writeValue(content: any): void {\r\n    this.updateEditor(content);\r\n  }\r\n\r\n  registerOnChange(fn: (_: any) => void): void { this.onChange = fn; }\r\n  registerOnTouched(fn: () => void): void { this.onTouched = fn; }\r\n  // End ControlValueAccesor methods.\r\n\r\n  // froalaEditor directive as input: store the editor options\r\n  @Input() set froalaEditor(opts: any) {\r\n    this._opts = opts || this._opts;\r\n  }\r\n\r\n  // froalaModel directive as input: store initial editor content\r\n  @Input() set froalaModel(content: any) {\r\n    this.updateEditor(content);\r\n  }\r\n\r\n  // Update editor with model contents.\r\n  private updateEditor(content: any) {\r\n    if (JSON.stringify(this._oldModel) == JSON.stringify(content)) {\r\n      return;\r\n    }\r\n\r\n    if (!this._hasSpecialTag) {\r\n      this._oldModel = content;\r\n    }\r\n    else {\r\n      this._model = content;\r\n    }\r\n\r\n    if (this._editorInitialized) {\r\n      if (!this._hasSpecialTag) {\r\n        this._$element.froalaEditor('html.set', content);\r\n      }\r\n      else {\r\n        this.setContent();\r\n      }\r\n    }\r\n    else {\r\n      if (!this._hasSpecialTag) {\r\n        this._$element.html(content);\r\n      }\r\n      else {\r\n        this.setContent();\r\n      }\r\n    }\r\n  }\r\n\r\n  // froalaModel directive as output: update model if editor contentChanged\r\n  @Output() froalaModelChange: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  // froalaInit directive as output: send manual editor initialization\r\n  @Output() froalaInit: EventEmitter<Object> = new EventEmitter<Object>();\r\n\r\n  // update model if editor contentChanged\r\n  private updateModel() {\r\n    this.zone.run(() => {\r\n\r\n      let modelContent: any = null;\r\n\r\n      if (this._hasSpecialTag) {\r\n\r\n        let attributeNodes = this._$element[0].attributes;\r\n        let attrs = {};\r\n\r\n        for (let i = 0; i < attributeNodes.length; i++) {\r\n\r\n          let attrName = attributeNodes[i].name;\r\n          if (this._opts.angularIgnoreAttrs && this._opts.angularIgnoreAttrs.indexOf(attrName) != -1) {\r\n            continue;\r\n          }\r\n\r\n          attrs[attrName] = attributeNodes[i].value;\r\n        }\r\n\r\n        if (this._$element[0].innerHTML) {\r\n          attrs[this.INNER_HTML_ATTR] = this._$element[0].innerHTML;\r\n        }\r\n\r\n        modelContent = attrs;\r\n      } else {\r\n\r\n        let returnedHtml: any = this._$element.froalaEditor('html.get');\r\n        if (typeof returnedHtml === 'string') {\r\n          modelContent = returnedHtml;\r\n        }\r\n      }\r\n      if (this._oldModel !== modelContent) {\r\n        this._oldModel = modelContent;\r\n\r\n        // Update froalaModel.\r\n        this.froalaModelChange.emit(modelContent);\r\n\r\n        // Update form model.\r\n        this.onChange(modelContent);\r\n      }\r\n\r\n    })\r\n  }\r\n\r\n  // register event on jquery element\r\n  private registerEvent(element, eventName, callback) {\r\n\r\n    if (!element || !eventName || !callback) {\r\n      return;\r\n    }\r\n\r\n    this._listeningEvents.push(eventName);\r\n    element.on(eventName, callback);\r\n  }\r\n\r\n  private initListeners() {\r\n\r\n    let self = this;\r\n\r\n    // bind contentChange and keyup event to froalaModel\r\n    this.registerEvent(this._$element, 'froalaEditor.contentChanged', function () {\r\n      setTimeout(function () {\r\n        self.updateModel();\r\n      }, 0);\r\n    });\r\n    this.registerEvent(this._$element, 'froalaEditor.mousedown', function () {\r\n      setTimeout(function () {\r\n        self.onTouched();\r\n      }, 0);\r\n    });\r\n\r\n    if (this._opts.immediateAngularModelUpdate) {\r\n      this.registerEvent(this._$element, 'keyup', function () {\r\n        setTimeout(function () {\r\n          self.updateModel();\r\n        }, 0);\r\n      });\r\n    }\r\n  }\r\n\r\n  // register events from editor options\r\n  private registerFroalaEvents() {\r\n\r\n    if (!this._opts.events) {\r\n      return;\r\n    }\r\n\r\n    for (let eventName in this._opts.events) {\r\n\r\n      if (this._opts.events.hasOwnProperty(eventName)) {\r\n        this.registerEvent(this._$element, eventName, this._opts.events[eventName]);\r\n      }\r\n    }\r\n  }\r\n\r\n  private createEditor() {\r\n\r\n    if (this._editorInitialized) {\r\n      return;\r\n    }\r\n\r\n    this.setContent(true);\r\n\r\n    // Registering events before initializing the editor will bind the initialized event correctly.\r\n    this.registerFroalaEvents();\r\n\r\n    this.initListeners();\r\n\r\n    // init editor\r\n    this.zone.runOutsideAngular(() => {\r\n      this._$element.on('froalaEditor.initialized', () => {\r\n        this._editorInitialized = true;\r\n      })\r\n\r\n      this._editor = this._$element.froalaEditor(this._opts).data('froala.editor').$el;\r\n    })\r\n  }\r\n\r\n  private setHtml() {\r\n    this._$element.froalaEditor('html.set', this._model || '', true);\r\n\r\n    // This will reset the undo stack everytime the model changes externally. Can we fix this?\r\n    this._$element.froalaEditor('undo.reset');\r\n    this._$element.froalaEditor('undo.saveStep');\r\n  }\r\n\r\n  private setContent(firstTime = false) {\r\n    let self = this;\r\n\r\n    // Set initial content\r\n    if (this._model || this._model == '') {\r\n      this._oldModel = this._model;\r\n      if (this._hasSpecialTag) {\r\n\r\n        let tags: Object = this._model;\r\n\r\n        // add tags on element\r\n        if (tags) {\r\n\r\n          for (let attr in tags) {\r\n            if (tags.hasOwnProperty(attr) && attr != this.INNER_HTML_ATTR) {\r\n              this._$element.attr(attr, tags[attr]);\r\n            }\r\n          }\r\n\r\n          if (tags.hasOwnProperty(this.INNER_HTML_ATTR)) {\r\n            this._$element[0].innerHTML = tags[this.INNER_HTML_ATTR];\r\n          }\r\n        }\r\n      } else {\r\n        if (firstTime) {\r\n          this.registerEvent(this._$element, 'froalaEditor.initialized', function () {\r\n            self.setHtml();\r\n          });\r\n        } else {\r\n          self.setHtml();\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  private destroyEditor() {\r\n    if (this._editorInitialized) {\r\n      this._$element.off(this._listeningEvents.join(\" \"));\r\n      this._editor.off('keyup');\r\n      this._$element.froalaEditor('destroy');\r\n      this._listeningEvents.length = 0;\r\n      this._editorInitialized = false;\r\n    }\r\n  }\r\n\r\n  private getEditor() {\r\n    if (this._$element) {\r\n      return this._$element.froalaEditor.bind(this._$element);\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  // send manual editor initialization\r\n  private generateManualController() {\r\n    let self = this;\r\n    let controls = {\r\n      initialize: this.createEditor.bind(this),\r\n      destroy: this.destroyEditor.bind(this),\r\n      getEditor: this.getEditor.bind(this),\r\n    };\r\n    this.froalaInit.emit(controls);\r\n  }\r\n\r\n  // TODO not sure if ngOnInit is executed after @inputs\r\n  ngOnInit() {\r\n    // check if output froalaInit is present. Maybe observers is private and should not be used?? TODO how to better test that an output directive is present.\r\n    if (!this.froalaInit.observers.length) {\r\n      this.createEditor();\r\n    } else {\r\n      this.generateManualController();\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroyEditor();\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from \"@angular/core\";\r\n\r\nimport { FroalaEditorDirective } from \"./editor.directive\";\r\n\r\n@NgModule({\r\n  declarations: [FroalaEditorDirective],\r\n  exports: [FroalaEditorDirective],\r\n})\r\nexport class FroalaEditorModule {\r\n  public static forRoot(): ModuleWithProviders<FroalaEditorModule> {\r\n    return { ngModule: FroalaEditorModule, providers: [] };\r\n  }\r\n}\r\n","import { Directive, ElementRef, Renderer2, Input } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[froalaView]'\r\n})\r\nexport class FroalaViewDirective {\r\n\r\n  private _element: HTMLElement;\r\n  private _content: any;\r\n\r\n  constructor(private renderer: Renderer2, element: ElementRef) {\r\n    this._element = element.nativeElement;\r\n  }\r\n\r\n  // update content model as it comes\r\n  @Input() set froalaView(content: string){\r\n    this._element.innerHTML = content;\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.renderer.addClass(this._element, \"fr-view\");\r\n  }\r\n}","import { NgModule, ModuleWithProviders } from \"@angular/core\";\r\n\r\nimport { FroalaViewDirective } from \"./view.directive\";\r\n\r\n@NgModule({\r\n  declarations: [FroalaViewDirective],\r\n  exports: [FroalaViewDirective],\r\n})\r\nexport class FroalaViewModule {\r\n  public static forRoot(): ModuleWithProviders<FroalaViewModule> {\r\n    return { ngModule: FroalaViewModule, providers: [] };\r\n  }\r\n}\r\n","import { ModuleWithProviders, NgModule } from '@angular/core';\r\n\r\nimport {FroalaEditorModule} from './editor';\r\nimport {FroalaViewModule} from './view';\r\n\r\nexport {\r\n  FroalaEditorDirective,\r\n  FroalaEditorModule\r\n} from './editor';\r\n\r\nexport {\r\n  FroalaViewDirective,\r\n  FroalaViewModule\r\n} from './view';\r\n\r\nconst MODULES = [\r\n  FroalaEditorModule,\r\n  FroalaViewModule\r\n]\r\n\r\n@NgModule({\r\n imports: [\r\n   FroalaEditorModule.forRoot(),\r\n   FroalaViewModule.forRoot()\r\n ],\r\n exports: MODULES\r\n})\r\nexport class FERootModule {\r\n\r\n}","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["EventEmitter","Directive","NG_VALUE_ACCESSOR","forwardRef","ElementRef","NgZone","Input","Output","NgModule","Renderer2"],"mappings":"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"}